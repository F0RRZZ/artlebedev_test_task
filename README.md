# API

## Описание API

API для получения информации о парках.

## URL-адрес и методы запроса

### Получение списка всех парков

`GET /api/v1/parks/`

### Получение информации о конкретном парке

`GET /api/v1/parks/:id/`

### Создание нового парка (доступно только администраторам сайта)

`POST /api/v1/parks/`

### Обновление информации о парке (доступно только администраторам сайта)

`PUT /api/v1/parks/:id/`

### Удаление парка (доступно только администраторам сайта)

`DELETE /api/v1/parks/:id/`

## Параметры запроса

### Получение списка всех парков

Нет параметров запроса.

### Получение информации о конкретном парке

Нет параметров запроса.

### Создание нового парка

- `name`: название парка
- `description`: описание парка
- `address`: адрес парка
- `coordinates`: координаты парка
- `email`: электронная почта парка
- `phone`: телефон парка
- `website`: веб-сайт парка
- `organization`: название организации, управляющей парком
- `inn`: ИНН организации, управляющей парком

### Обновление информации о парке

- `name`: новое название парка
- `description`: новое описание парка
- `address`: новый адрес парка
- `coordinates`: новые координаты парка
- `email`: новая электронная почта парка
- `phone`: новый телефон парка
- `website`: новый веб-сайт парка
- `organization`: новое название организации, управляющей парком
- `inn`: новый ИНН организации, управляющей парком

### Удаление парка

Нет параметров запроса.

## Примеры запросов и ответов

### Получение списка всех парков

#### Запрос

`GET /api/v1/parks/`

#### Ответ

```
{
  "count": 482,
  "next": "http://127.0.0.1:8000/api/v1/parks/?limit=25&offset=25",
  "previous": null,
  "results": [
    {
      "id": 4,
      "name": "Парк культуры и отдыха города Сальска",
      "description": "<p>13 октября 1948 года был утвержден проект городского парка культуры и отдыха им. 30-летия ВЛКСМ. Его решили строить на месте бывшего городского стадиона, располагавшегося на территории между ДК «Коммунар», улицами Первомайской и Московской до переулка Коммунального. Организованно выходили комсомольцы и пионеры на закладку нового парка. Были разбиты главные аллеи, клумбы, посажены кустарники и деревья, поставлены красивые ворота. Вход в парк был платным, но по доступной цене. На вырученные деньги содержались духовой оркестр и цветоводческая бригада. С самого начала парк стал любимым местом отдыха сальчан. </p><p>В 50-е годы ПКиО был открыт для посещения сальчан, т. е. вход в парк стал бесплатным. К этому времени здесь уже стояли аттракционы, была выстроена танцплощадка, был открыт фонтан с живой черепахой. В 60–80-е годы начинается второй период развития парка. Были установлены новые аттракционы, был проведен водопровод и заасфальтирована центральная аллея, построены спортивные площадки, выстроена теплица, работал летний кинотеатр.</p>",
      "address": "обл Ростовская,р-н Сальский,г Сальск,пер Спортивный,д 1",
      "coordinates": "41.544791000000004, 46.475835000000004",
      "email": "salskpkio@mail.ru",
      "phone": "78637251863",
      "website": null,
      "organization": "Муниципальное бюджетное учреждение «Парк культуры и отдыха» Сальского городского поселения",
      "inn": "6153010127"
    },
    {
      "id": 5,
      "name": "Городской парк культуры и отдыха г. Михайловка",
      "description": "<p> Городской парк – одно из любимых мест отдыха жителей города. Парк был основан в 1955 году. Инициатором стал директор цементного завода Марк Моисеевич Смехов. Первым директором парка стал Василий Гаврилович Кочетов. За пять лет руками рабочих и служащих цемзавода было посажено более 6 000 деревьев и 3 600 кустарников. </p><p>В настоящее время площадь парка составляет 21 гектар. Здесь растут более 30 видов деревьев и кустарников: дубы, берёзы, липы, плакучие ивы, рябины, клёны, тополя, сирень, птелея, белый дерен и другие. На территории парка расположены 20 ярких красочных аттракционов. Внимание посетителей привлекают деревянные скульптуры животных и сказочных персонажей. Здесь обитают павлины и фазаны, которые живут в специальном вольере. Питомцы «Живого уголка» с большим удовольствием позируют и принимают угощения от посетителей. Не остается без внимания городской пруд, на берегу которого обосновался большой крокодил.</p><p> Работа парка ведется по четырем основным направлениям:</p><ul><li>создание благоприятных условий для организации культурного досуга и отдыха жителей городского округа;</li><li>предоставление услуг социально-культурного, просветительского, развлекательного характера, доступных для широких слоев населения;</li><li>организация обустройства мест массового отдыха населения; </li><li>организация проведения физкультурно-оздоровительных и спортивных мероприятий.</li></ul>",
      "address": "обл Волгоградская,г Михайловка,ул Магистральная",
      "coordinates": "43.232917785644524, 50.08221467015608",
      "email": "park_kulturi_2009@mail.ru",
      "phone": "78446322654",
      "website": "http://mihpark.ru",
      "organization": "Городской парк культуры и отдыха им.М.М. Смехова",
      "inn": "3437013366"
    }
  ]
}
```

### Получение информации о конкретном парке

#### Запрос

`GET /api/v1/parks/5/`

#### Ответ

```
{
  "id": 5,
  "name": "Городской парк культуры и отдыха г. Михайловка",
  "description": "<p> Городской парк – одно из любимых мест отдыха жителей города. Парк был основан в 1955 году. Инициатором стал директор цементного завода Марк Моисеевич Смехов. Первым директором парка стал Василий Гаврилович Кочетов. За пять лет руками рабочих и служащих цемзавода было посажено более 6 000 деревьев и 3 600 кустарников. </p><p>В настоящее время площадь парка составляет 21 гектар. Здесь растут более 30 видов деревьев и кустарников: дубы, берёзы, липы, плакучие ивы, рябины, клёны, тополя, сирень, птелея, белый дерен и другие. На территории парка расположены 20 ярких красочных аттракционов. Внимание посетителей привлекают деревянные скульптуры животных и сказочных персонажей. Здесь обитают павлины и фазаны, которые живут в специальном вольере. Питомцы «Живого уголка» с большим удовольствием позируют и принимают угощения от посетителей. Не остается без внимания городской пруд, на берегу которого обосновался большой крокодил.</p><p> Работа парка ведется по четырем основным направлениям:</p><ul><li>создание благоприятных условий для организации культурного досуга и отдыха жителей городского округа;</li><li>предоставление услуг социально-культурного, просветительского, развлекательного характера, доступных для широких слоев населения;</li><li>организация обустройства мест массового отдыха населения; </li><li>организация проведения физкультурно-оздоровительных и спортивных мероприятий.</li></ul>",
  "address": "обл Волгоградская,г Михайловка,ул Магистральная",
  "coordinates": "43.232917785644524, 50.08221467015608",
  "email": "park_kulturi_2009@mail.ru",
  "phone": "78446322654",
  "website": "http://mihpark.ru",
  "organization": "Городской парк культуры и отдыха им.М.М. Смехова",
  "inn": "3437013366"
}
```

### Создание нового парка

#### Запрос

```
POST /api/v1/parks/
Content-Type: application/json

{
  "name": "Парк имени Юрия Гагарина",
  "description": "Небольшой парк в южной части города",
  "address": "ул. Гагарина, 10",
  "coordinates": "55.700000, 37.600000",
  "email": "gagarin_park@example.com",
  "phone": "+7 (495) 345-67-89",
  "website": "http://gagarin-park.example.com",
  "organization": "ГУП \"Парк имени Юрия Гагарина\"",
  "inn": "9876543210"
}
```

#### Ответ

```
{
  "id": 6,
  "name": "Парк имени Юрия Гагарина",
  "description": "Небольшой парк в южной части города",
  "address": "ул. Гагарина, 10",
  "coordinates": "55.700000, 37.600000",
  "email": "gagarin_park@example.com",
  "phone": "+7 (495) 345-67-89",
  "website": "http://gagarin-park.example.com",
  "organization": "ГУП \"Парк имени Юрия Гагарина\"",
  "inn": "9876543210"
}
```

### Обновление информации о парке

#### Запрос

```
PUT /api/v1/parks/6/
Content-Type: application/json

{
  "name": "Парк имени Юрия Гагарина",
  "description": "Небольшой парк в южной части города",
  "address": "ул. Гагарина, 10",
  "coordinates": "55.700000, 37.600000",
  "email": "gagarin_park@example.com",
  "phone": "+7 (495) 345-67-89",
  "website": "http://gagarin-park.example.com",
  "organization": "ГУП \"Парк имени Юрия Гагарина\"",
  "inn": "9876543210"
}
```

#### Ответ

```
{
  "id": 6,
  "name": "Парк имени Юрия Гагарина",
  "description": "Небольшой парк в южной части города",
  "address": "ул. Гагарина, 10",
  "coordinates": "55.700000, 37.600000",
  "email": "gagarin_park@example.com",
  "phone": "+7 (495) 345-67-89",
  "website": "http://gagarin-park.example.com",
  "organization": "ГУП \"Парк имени Юрия Гагарина\"",
  "inn": "9876543210"
}
```

### Удаление парка

#### Запрос

`DELETE /api/v1/parks/6/`

#### Ответ

Нет ответа.

## Пагинация

Для получения списка всех парков можно использовать параметры пагинации:

- offset: сдвиг относительно первого элемента
- limit: количество элементов на странице (по умолчанию 25)

Пример запроса с пагинацией:

GET /api/v1/parks/?page=2&page_size=20

---

# Установка

Для того, чтобы проделать следующие шаги на Windows, установите [Git Bash](https://gitforwindows.org/)

1. Склонируйте репозиторий

```shell
git clone https://github.com/F0RRZZ/reviewer.git
```

2. Скачайте и установите Docker

Скачать и найти инструкцию по установке вы можете на официальном сайте [Docker](https://www.docker.com)

3. Запустите сайт в Docker

Для этого откройте терминал и перейдите в папку репозитория

```shell
cd artlebedev_test_task
```

Войдите в корневую директорию проекта

```shell
cd artlebedev_test_task
```

#### ! Перед тем, как собрать докер контейнеры, измените файл .env.docker на нужные значения. Либо измените его из командной строки контейнера (как в нее войти будет сказано дальше) !

---

#### Переменные окружения в .env

Описание:
1. ALLOWED_HOSTS - разрешенные хосты
2. DEBUG - режим отладки
3. POSTGRES_DB - имя базы данных
4. POSTGRES_HOST - хост базы данных (в данном случае имя сервиса в docker-compose)
5. POSTGRES_PASSWORD - пароль от базы данных
6. POSTGRES_PORT - порт, требующийся для работы базы данных
7. POSTGRES_USER - имя пользователя базы данных
8. SECRET_KEY - секретный ключ от вашего сайта

Далее введите команду

```shell
docker-compose up --build
```

4. Создайте суперпользователя

После того как вы запустили сайт в Docker нужно создать суперпользователя для доступа в панель администратора

Для начала нам нужно узнать ID контейнера, в котором запущен веб-сервер

```shell
docker ps -a
```

В данном списке найдите контейнер с именем reviewer-web и скопируйте CONTAINER ID

Далее введите команду

```shell
docker exec -it <container_id> sh
```

Вместо <container_id> вставьте раннее скопированный ID

После ввода данной команды вам должен быть предоставлен доступ к командной строке контейнера

Вам нужно ввести команду:

```shell
python manage.py createsuperuser
```

И ввести данные суперпользователя

Теперь вы можете зарегистрироваться по данным, введенным раннее и получить доступ к панеле администратора

Готово! Сервер запущен.
Чтобы зайти на сайт перейдите по ссылке: localhost:8000

Чтобы остановить работу контейнеров, в терминале, откуда вы запускали docker-compose нажмите Ctrl+C (Control + C для Mac)
